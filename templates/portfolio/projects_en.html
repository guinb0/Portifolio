{% extends 'portfolio/base.html' %}
{% load static %}
{% block title %}Projects - Guilherme Nunes{% endblock %}
{% block content %}
<section class="portfolio" style="padding:140px 7% 80px; min-height:100vh;" id="portfolio">
    <div class="heading">
        <h1>My <span>Projects</span></h1>
    </div>
    <div class="portfolio-container">
        {% for project in projects %}
        <div class="project-card">
            <h3 class="project-title">{{ project.title }}</h3>

            {% if project.demo_video %}
            <div class="project-video">
                <video controls preload="metadata">
                    <source src="{{ project.demo_video.url }}" type="video/mp4">
                    Your browser does not support videos.
                </video>
            </div>
            {% elif project.image %}
            <div class="project-image">
                <img src="{{ project.image.url }}" alt="{{ project.title }}">
            </div>
            {% endif %}

            <div class="project-description">
                <p>{{ project.description }}</p>
            </div>

            {% if project.get_tags_list %}
            <div class="project-tags">
                {% for tag in project.get_tags_list %}
                <span class="project-tag">{{ tag }}</span>
                {% endfor %}
            </div>
            {% endif %}

            {% if project.get_repositories_list %}
            <div class="project-repositories">
                <h4><i class='bx bxl-github'></i> Repositories:</h4>
                <div class="repo-links">
                    {% for repo_url in project.get_repositories_list %}
                    <a href="{{ repo_url }}" target="_blank" class="repo-link">
                        <i class='bx bx-git-repo-forked'></i>
                        {{ repo_url|slice:":50" }}{% if repo_url|length > 50 %}...{% endif %}
                    </a>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            {% if project.youtube_explanation_url %}
            <div class="project-youtube">
                <a href="{{ project.youtube_explanation_url }}" target="_blank" class="youtube-link">
                    <i class='bx bxl-youtube'></i> Watch Explanation on YouTube
                </a>
            </div>
            {% endif %}

            {% if project.url %}
            <div class="project-live">
                <a href="{{ project.url }}" target="_blank" class="live-link">
                    <i class='bx bx-link-external'></i> View Live Project
                </a>
            </div>
            {% endif %}
        </div>
        {% empty %}
        <p style="text-align:center; color:var(--text-light); width:100%;">No projects registered yet.</p>
        {% endfor %}
    </div>
</section>
{% endblock %}