{% extends 'portfolio/base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/courses.css' %}">
{% endblock %}

{% block content %}
<section class="courses-section">
    <div class="container">
        <div class="heading">
            <h1>
                {% if language == 'en' %}
                    My <span>Courses</span>
                {% elif language == 'es' %}
                    Mis <span>Cursos</span>
                {% else %}
                    Meus <span>Cursos</span>
                {% endif %}
            </h1>
            <p class="subtitle">
                {% if language == 'en' %}
                    Learn with structured and practical content
                {% elif language == 'es' %}
                    Aprende con contenido estructurado y práctico
                {% else %}
                    Aprenda com conteúdo estruturado e prático
                {% endif %}
            </p>
        </div>

        <!-- Language Filter (Flags) -->
        <div class="language-filter" style="display:flex; gap:.75rem; flex-wrap:wrap; margin-bottom:2rem;">
            <button class="filter-btn active" data-lang="all" type="button">
                <img src="{% static 'images/flags/world.png' %}" alt="All" class="flag-icon">
                {% if language == 'en' %}All{% elif language == 'es' %}Todas{% else %}Todas{% endif %}
            </button>
            <button class="filter-btn" data-lang="pt" type="button">
                <img src="{% static 'images/flags/brazil.png' %}" alt="PT" class="flag-icon">
                PT
            </button>
            <button class="filter-btn" data-lang="en" type="button">
                <img src="{% static 'images/flags/usa.png' %}" alt="EN" class="flag-icon">
                EN
            </button>
            <button class="filter-btn" data-lang="es" type="button">
                <img src="{% static 'images/flags/spain.png' %}" alt="ES" class="flag-icon">
                ES
            </button>
        </div>

        {% if courses %}
        <div class="courses-grid">
            {% for course in courses %}
            <div class="course-card" data-language="{{ course.language }}">
                {% if course.cover_image %}
                <div class="course-image">
                    <div class="course-flag-badge">
                        {% if course.language == 'pt' %}
                            <img src="{% static 'images/flags/brazil.png' %}" alt="PT" class="flag-icon">
                        {% elif course.language == 'en' %}
                            <img src="{% static 'images/flags/usa.png' %}" alt="EN" class="flag-icon">
                        {% elif course.language == 'es' %}
                            <img src="{% static 'images/flags/spain.png' %}" alt="ES" class="flag-icon">
                        {% endif %}
                    </div>
                    <img src="{{ course.cover_image.url }}" alt="{{ course.title }}">
                </div>
                {% else %}
                <div class="course-image placeholder">
                    <div class="course-flag-badge">
                        {% if course.language == 'pt' %}
                            <img src="{% static 'images/flags/brazil.png' %}" alt="PT" class="flag-icon">
                        {% elif course.language == 'en' %}
                            <img src="{% static 'images/flags/usa.png' %}" alt="EN" class="flag-icon">
                        {% elif course.language == 'es' %}
                            <img src="{% static 'images/flags/spain.png' %}" alt="ES" class="flag-icon">
                        {% endif %}
                    </div>
                    <i class='bx bx-book-open'></i>
                </div>
                {% endif %}
                
                <div class="course-content">
                    <h3>{{ course.title }}</h3>
                    <p class="course-description">{{ course.description|truncatewords:20 }}</p>
                    
                    <div class="course-meta">
                        <span class="lessons-count">
                            <i class='bx bx-video'></i>
                            {{ course.get_lessons_count }}
                            {% if language == 'en' %}
                                {% if course.get_lessons_count == 1 %}lesson{% else %}lessons{% endif %}
                            {% elif language == 'es' %}
                                {% if course.get_lessons_count == 1 %}clase{% else %}clases{% endif %}
                            {% else %}
                                {% if course.get_lessons_count == 1 %}aula{% else %}aulas{% endif %}
                            {% endif %}
                        </span>
                    </div>
                    
                    <a href="{% if language == 'en' %}{% url 'portfolio:course_detail_en' course.slug %}{% elif language == 'es' %}{% url 'portfolio:course_detail_es' course.slug %}{% else %}{% url 'portfolio:course_detail' course.slug %}{% endif %}" class="btn-view-course">
                        {% if language == 'en' %}
                            View Course
                        {% elif language == 'es' %}
                            Ver Curso
                        {% else %}
                            Ver Curso
                        {% endif %}
                        <i class='bx bx-right-arrow-alt'></i>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <i class='bx bx-book-open'></i>
            <p>
                {% if language == 'en' %}
                    No courses available yet. Check back soon!
                {% elif language == 'es' %}
                    Aún no hay cursos disponibles. ¡Vuelve pronto!
                {% else %}
                    Nenhum curso disponível ainda. Volte em breve!
                {% endif %}
            </p>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/courses-filter.js' %}"></script>
{% endblock %}
