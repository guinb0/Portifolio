{% extends 'portfolio/base.html' %}
{% load static %}

{% block title %}Assistente de Receitas - Guilherme Nunes{% endblock %}

{% block content %}
<section class="receitas" style="padding: 140px 7% 80px; min-height: 100vh; background: var(--bg-light);">
    <div class="heading">
        <h1>Assistente de <span>Receitas</span></h1>
        <p style="color: var(--text-light); margin-top: 1rem; font-size: 1.1rem;">Digite os ingredientes que você tem e receba sugestões de receitas!</p>
    </div>
    
    <div class="receitas-container" style="max-width: 1000px; margin: 0 auto;">
        
        <!-- Formulário -->
        <div class="receitas-form" style="background: var(--bg-white); padding: 3rem; border-radius: 25px; box-shadow: 0 10px 40px var(--shadow); margin-bottom: 3rem;">
            <div style="margin-bottom: 2rem;">
                <label for="ingredientes" style="display: block; font-size: 1.2rem; font-weight: 600; color: var(--text-dark); margin-bottom: 0.5rem;">
                    <i class='bx bx-food-menu'></i> Ingredientes disponíveis:
                </label>
                <textarea 
                    id="ingredientes" 
                    rows="4" 
                    placeholder="Ex: frango, arroz, tomate, cebola..."
                    style="width: 100%; padding: 1rem; border: 2px solid rgba(102, 126, 234, 0.2); border-radius: 15px; font-size: 1rem; font-family: inherit; resize: vertical; transition: all 0.3s;"
                ></textarea>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                <div>
                    <label for="tipo-cozinha" style="display: block; font-size: 1rem; font-weight: 600; color: var(--text-dark); margin-bottom: 0.5rem;">
                        <i class='bx bx-world'></i> Tipo de Cozinha:
                    </label>
                    <select 
                        id="tipo-cozinha"
                        style="width: 100%; padding: 0.8rem; border: 2px solid rgba(102, 126, 234, 0.2); border-radius: 15px; font-size: 1rem; font-family: inherit;"
                    >
                        <option value="">Qualquer</option>
                        <option value="brasileira">Brasileira</option>
                        <option value="italiana">Italiana</option>
                        <option value="japonesa">Japonesa</option>
                        <option value="mexicana">Mexicana</option>
                        <option value="francesa">Francesa</option>
                    </select>
                </div>
                
                <div>
                    <label for="restricoes" style="display: block; font-size: 1rem; font-weight: 600; color: var(--text-dark); margin-bottom: 0.5rem;">
                        <i class='bx bx-shield'></i> Restrições:
                    </label>
                    <select 
                        id="restricoes"
                        style="width: 100%; padding: 0.8rem; border: 2px solid rgba(102, 126, 234, 0.2); border-radius: 15px; font-size: 1rem; font-family: inherit;"
                    >
                        <option value="">Nenhuma</option>
                        <option value="vegetariana">Vegetariana</option>
                        <option value="vegana">Vegana</option>
                        <option value="sem-gluten">Sem Glúten</option>
                        <option value="sem-lactose">Sem Lactose</option>
                    </select>
                </div>
            </div>
            
            <button 
                id="buscar-receitas"
                class="btn" 
                style="width: 100%; justify-content: center;"
            >
                <i class='bx bx-search-alt'></i> Buscar Receitas
            </button>
        </div>
        
        <!-- Resultados -->
        <div id="resultados" style="display: none;">
            <h2 style="font-size: 2rem; margin-bottom: 2rem; color: var(--text-dark); text-align: center;">Receitas Sugeridas</h2>
            <div id="receitas-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2rem;">
                <!-- Receitas serão inseridas aqui via JavaScript -->
            </div>
        </div>
        
        <!-- Loading -->
        <div id="loading" style="display: none; text-align: center; padding: 3rem;">
            <div style="font-size: 3rem; color: var(--primary-color); animation: spin 1s linear infinite;">
                <i class='bx bx-loader-alt'></i>
            </div>
            <p style="color: var(--text-light); margin-top: 1rem; font-size: 1.1rem;">Buscando as melhores receitas para você...</p>
        </div>
        
        <!-- Mensagem quando não há resultados -->
        <div id="sem-resultados" style="display: none; text-align: center; padding: 3rem; background: var(--bg-white); border-radius: 25px; box-shadow: 0 10px 40px var(--shadow);">
            <i class='bx bx-sad' style="font-size: 4rem; color: var(--text-light);"></i>
            <h3 style="color: var(--text-dark); margin-top: 1rem;">Nenhuma receita encontrada</h3>
            <p style="color: var(--text-light); margin-top: 0.5rem;">Tente adicionar mais ingredientes ou modificar os filtros.</p>
        </div>
        
    </div>
    
    <div style="text-align: center; margin-top: 3rem;">
        <a href="{% url 'portfolio:home' %}" class="btn btn-secondary">
            <i class='bx bx-arrow-back'></i> Voltar ao Início
        </a>
    </div>
</section>

<style>
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

#ingredientes:focus,
#tipo-cozinha:focus,
#restricoes:focus {
    outline: none;
    border-color: var(--primary-color);
}

.receita-card {
    background: var(--bg-white);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 30px var(--shadow);
    transition: all 0.3s;
}

.receita-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 60px rgba(102, 126, 234, 0.3);
}

.receita-img {
    width: 100%;
    height: 200px;
    object-fit: cover;
}

.receita-content {
    padding: 1.5rem;
}

.receita-title {
    font-size: 1.3rem;
    color: var(--text-dark);
    margin-bottom: 0.8rem;
}

.receita-description {
    color: var(--text-light);
    font-size: 0.95rem;
    line-height: 1.6;
    margin-bottom: 1rem;
}

.receita-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.receita-tag {
    background: rgba(102, 126, 234, 0.1);
    color: var(--primary-color);
    padding: 0.3rem 0.8rem;
    border-radius: 15px;
    font-size: 0.85rem;
    font-weight: 500;
}
</style>

<script>
document.getElementById('buscar-receitas').addEventListener('click', function() {
    // Obter valores
    const ingredientes = document.getElementById('ingredientes').value;
    const tipoCozinha = document.getElementById('tipo-cozinha').value;
    const restricoes = document.getElementById('restricoes').value;
    
    if (!ingredientes.trim()) {
        alert('Por favor, digite pelo menos um ingrediente!');
        return;
    }
    
    // Mostrar loading
    document.getElementById('loading').style.display = 'block';
    document.getElementById('resultados').style.display = 'none';
    document.getElementById('sem-resultados').style.display = 'none';
    
    // Simular busca (substituir por chamada real à API)
    setTimeout(() => {
        document.getElementById('loading').style.display = 'none';
        
        // Exemplo de receitas (substituir por dados reais da API)
        const receitasExemplo = [
            {
                titulo: 'Frango Grelhado com Legumes',
                descricao: 'Uma receita saudável e saborosa com frango grelhado acompanhado de legumes frescos.',
                tags: ['Saudável', 'Rápido', 'Fácil'],
                imagem: '{% static "img/receitas.png" %}'
            },
            {
                titulo: 'Arroz à Grega',
                descricao: 'Arroz preparado com legumes coloridos, uma opção versátil e nutritiva.',
                tags: ['Vegetariano', 'Colorido', 'Nutritivo'],
                imagem: '{% static "img/receitas.png" %}'
            }
        ];
        
        if (receitasExemplo.length > 0) {
            document.getElementById('resultados').style.display = 'block';
            const grid = document.getElementById('receitas-grid');
            grid.innerHTML = '';
            
            receitasExemplo.forEach(receita => {
                const card = `
                    <div class="receita-card">
                        <img src="${receita.imagem}" alt="${receita.titulo}" class="receita-img">
                        <div class="receita-content">
                            <h3 class="receita-title">${receita.titulo}</h3>
                            <p class="receita-description">${receita.descricao}</p>
                            <div class="receita-tags">
                                ${receita.tags.map(tag => `<span class="receita-tag">${tag}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                `;
                grid.innerHTML += card;
            });
        } else {
            document.getElementById('sem-resultados').style.display = 'block';
        }
    }, 1500);
});
</script>
{% endblock %}
